import{g as b,u as A}from"./chunk-GHJURQL5.js";import{ha as d,ka as T,xa as D}from"./chunk-DMHGCIMZ.js";import{Ce as h,Pd as v,Qd as E,Wd as c,_d as P,f as S,h as y,le as I,ne as p,ze as l}from"./chunk-PP2U4GMG.js";var g=S(P(),1);function M(){return y(this,null,function*(){if(p)return;function r(n){l.set(n),d.emit("WEB_FINISH"),window.__FINISHED__=!0}let i=T(l(),I);if(!I)return r(i);if(window.localStorage.getItem(c.DATE_TIME)!==v.datetime){let n=[c.WEBSITE,c.DATE_TIME];Array.from({length:globalThis.localStorage.length},(e,t)=>globalThis.localStorage.key(t)).forEach(e=>{e&&n.includes(e)&&globalThis.localStorage.removeItem(e)}),globalThis.localStorage.setItem(c.DATE_TIME,v.datetime),g.default.removeItem(c.WEBSITE),r(i),I&&setTimeout(()=>{d.emit("NOTIFICATION",{type:"success",title:h("_buildSuccess"),content:v.datetime,config:{nzDuration:0}})},1e3);return}try{let n=(yield g.default.getItem(c.WEBSITE))||i;r(n)}catch{r(i)}})}function u(r){return p?D({content:JSON.stringify(r),path:E}):g.default.setItem(c.WEBSITE,r)}function w(r){let{id:i}=b(),{oneIndex:a,twoIndex:n}=A(i),e=!r[a].nav[n].collapsed;return r[a].nav[n].collapsed=e,r[a].nav[n].nav.map(t=>(t.collapsed=e,t)),p||u(r),e}function R(r,i=!1){return y(this,null,function*(){let a=!1;function n(t){for(let f=0;f<t.length;f++){let o=t[f];Array.isArray(o.nav)&&(o.nav=o.nav.filter(s=>s.name&&r.includes(i?s.rId:s.id)?(a=!0,!1):!0),n(o.nav))}}let e=l();if(n(e),a){yield u(e);let{q:t}=b();t&&!p&&d.emit("WEB_REFRESH")}return a})}function j(r,i){let a=Object.keys(i),n=!1;function e(f){for(let o=0;o<f.length;o++){let s=f[o];if(s.name&&s.id===r){n=!0;for(let m of a)s[m]=i[m]}Array.isArray(s.nav)&&e(s.nav)}}let t=l();return e(t),l.set(t),u(t),n}function q(r){let i=null;function a(n){for(let e=0;e<n.length;e++){let t=n[e];if(t.name&&t.id===r){i=t;break}Array.isArray(t.nav)&&a(t.nav)}}return a(l()),i}function K(r,i){let a=Object.keys(i),n=!1;function e(f){for(let o=0;o<f.length;o++){let s=f[o];if(s.title&&s.id===r){n=!0;for(let m of a)s[m]=i[m]}Array.isArray(s.nav)&&!s.nav[0]?.name&&e(s.nav)}}let t=l();return e(t),l.set(t),u(t),n}function L(r,i=!1){return y(this,null,function*(){let a=!1;function n(t){for(let f=0;f<t.length;f++){let o=t[f];if(Array.isArray(o.nav)){if(n(o.nav),o.nav[0]?.name)break;o.nav=o.nav.filter(s=>s.title&&r.includes(i?s.rId:s.id)?(a=!0,!1):!0)}}}let e=l();return r.forEach(t=>{e.forEach((f,o)=>{f.id===t&&(a=!0,e.splice(o,1))})}),n(e),a&&(l.set(e),yield u(e)),a})}function z(r,i){let a=!1;function n(t){for(let f=0;f<t.length;f++){let o=t[f];o.title&&o.id===r&&(a=!0,o.nav.unshift(i)),Array.isArray(o.nav)&&n(o.nav)}}let e=l();return n(e),l.set(e),u(e),a}export{M as a,u as b,w as c,R as d,j as e,q as f,K as g,L as h,z as i};
